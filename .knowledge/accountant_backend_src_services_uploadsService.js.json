{"is_source_file": true, "format": "JavaScript", "description": "This file defines an UploadsService class that provides functions to create, list, retrieve, and update upload records in a database. It handles upload metadata management, including creation, querying, and status updates.", "external_files": ["../db/pool", "../errors/apiError"], "external_methods": ["query"], "published": ["new UploadsService()"], "classes": [{"name": "UploadsService", "description": "A service class managing upload records in the database, including creation, listing, retrieval, and status updating functionalities."}], "methods": [{"name": "createUpload({ uploadType, file })", "description": "Creates a new upload record from a file object and upload type, inserting metadata into the database.", "scope": "UploadsService", "scopeKind": "class"}, {"name": "listUploads({ uploadType, limit = 50, offset = 0 })", "description": "Retrieves a list of upload records, optionally filtered by upload type, with pagination support.", "scope": "UploadsService", "scopeKind": "class"}, {"name": "getUpload(id)", "description": "Fetches a specific upload record by its ID.", "scope": "UploadsService", "scopeKind": "class"}, {"name": "setStatus(id, status, errorMessage = null)", "description": "Updates the status and optional error message of an upload record.", "scope": "UploadsService", "scopeKind": "class"}], "calls": ["query"], "search-terms": ["UploadsService", "createUpload", "listUploads", "getUpload", "setStatus", "uploads table", "upload metadata", "file upload handling", "Database interactions"], "state": 2, "file_id": 18, "knowledge_revision": 66, "git_revision": "95c0f60de593face0a4bfa25093ec367bf7571b4", "revision_history": [{"52": "95c0f60de593face0a4bfa25093ec367bf7571b4"}, {"66": "95c0f60de593face0a4bfa25093ec367bf7571b4"}], "ctags": [{"_type": "tag", "name": "UploadsService", "path": "/home/kavia/workspace/code-generation/thai-accountant-assistant-226192-226202/accountant_backend/src/services/uploadsService.js", "pattern": "/^class UploadsService {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "createUpload", "path": "/home/kavia/workspace/code-generation/thai-accountant-assistant-226192-226202/accountant_backend/src/services/uploadsService.js", "pattern": "/^  async createUpload({ uploadType, file }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ uploadType, file })", "scope": "UploadsService", "scopeKind": "class"}, {"_type": "tag", "name": "exports", "path": "/home/kavia/workspace/code-generation/thai-accountant-assistant-226192-226202/accountant_backend/src/services/uploadsService.js", "pattern": "/^module.exports = new UploadsService();$/", "language": "JavaScript", "kind": "variable", "scope": "module", "scopeKind": "class"}, {"_type": "tag", "name": "getUpload", "path": "/home/kavia/workspace/code-generation/thai-accountant-assistant-226192-226202/accountant_backend/src/services/uploadsService.js", "pattern": "/^  async getUpload(id) {$/", "language": "JavaScript", "kind": "method", "signature": "(id)", "scope": "UploadsService", "scopeKind": "class"}, {"_type": "tag", "name": "listUploads", "path": "/home/kavia/workspace/code-generation/thai-accountant-assistant-226192-226202/accountant_backend/src/services/uploadsService.js", "pattern": "/^  async listUploads({ uploadType, limit = 50, offset = 0 }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ uploadType, limit = 50, offset = 0 })", "scope": "UploadsService", "scopeKind": "class"}, {"_type": "tag", "name": "setStatus", "path": "/home/kavia/workspace/code-generation/thai-accountant-assistant-226192-226202/accountant_backend/src/services/uploadsService.js", "pattern": "/^  async setStatus(id, status, errorMessage = null) {$/", "language": "JavaScript", "kind": "method", "signature": "(id, status, errorMessage = null)", "scope": "UploadsService", "scopeKind": "class"}], "hash": "c7d93c1bd7142e42d7f0860656f9eaaf", "format-version": 4, "code-base-name": "accountant_backend", "filename": "accountant_backend/src/services/uploadsService.js", "fields": [{"name": "module.exports = new UploadsService();", "scope": "module", "scopeKind": "class", "description": "unavailable"}]}