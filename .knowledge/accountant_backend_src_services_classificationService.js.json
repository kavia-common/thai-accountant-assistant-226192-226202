{"is_source_file": true, "format": "JavaScript", "description": "This source file defines the ClassificationService class responsible for classifying financial transactions based on heuristics and categories. It includes functions for heuristic classification, category resolution, and methods to classify uploads and list classifications. The file interacts with a database and handles transaction data, making it central to the classification logic in the project.", "external_files": ["../config/env", "../db/pool", "../errors/apiError"], "external_methods": ["require('../config/env').config", "require('../db/pool').query", "require('../errors/apiError').ApiError"], "published": ["ClassificationService"], "classes": [{"name": "ClassificationService", "description": "Encapsulates methods for classifying transaction uploads and listing classifications, including heuristic and AI-based approaches, along with database interactions."}], "methods": [{"name": "classifyUpload(uploadId)", "description": "Classifies all transactions associated with a given upload ID, utilizing heuristic and optional AI classification, then upserts the classifications into the database.", "scope": "ClassificationService", "scopeKind": "class"}, {"name": "listByUpload(uploadId)", "description": "Retrieves and joins classification data with transactions for a specific upload ID.", "scope": "ClassificationService", "scopeKind": "class"}, {"name": "heuristicClassify(txn)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "resolveCategoryIdByThaiName({ parentId, nameTh })", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["query", "resolveCategoryIdByThaiName", "heuristicClassify"], "search-terms": ["classificationService", "heuristicClassify", "resolveCategoryIdByThaiName", "categorization", "transaction classification", "AI classification"], "state": 2, "file_id": 20, "knowledge_revision": 54, "git_revision": "95c0f60de593face0a4bfa25093ec367bf7571b4", "ctags": [{"_type": "tag", "name": "ClassificationService", "path": "/home/kavia/workspace/code-generation/thai-accountant-assistant-226192-226202/accountant_backend/src/services/classificationService.js", "pattern": "/^class ClassificationService {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "classifyUpload", "path": "/home/kavia/workspace/code-generation/thai-accountant-assistant-226192-226202/accountant_backend/src/services/classificationService.js", "pattern": "/^  async classifyUpload(uploadId) {$/", "language": "JavaScript", "kind": "method", "signature": "(uploadId)", "scope": "ClassificationService", "scopeKind": "class"}, {"_type": "tag", "name": "exports", "path": "/home/kavia/workspace/code-generation/thai-accountant-assistant-226192-226202/accountant_backend/src/services/classificationService.js", "pattern": "/^module.exports = new ClassificationService();$/", "language": "JavaScript", "kind": "variable", "scope": "module", "scopeKind": "class"}, {"_type": "tag", "name": "heuristicClassify", "path": "/home/kavia/workspace/code-generation/thai-accountant-assistant-226192-226202/accountant_backend/src/services/classificationService.js", "pattern": "/^function heuristicClassify(txn) {$/", "language": "JavaScript", "kind": "function", "signature": "(txn)"}, {"_type": "tag", "name": "listByUpload", "path": "/home/kavia/workspace/code-generation/thai-accountant-assistant-226192-226202/accountant_backend/src/services/classificationService.js", "pattern": "/^  async listByUpload(uploadId) {$/", "language": "JavaScript", "kind": "method", "signature": "(uploadId)", "scope": "ClassificationService", "scopeKind": "class"}, {"_type": "tag", "name": "resolveCategoryIdByThaiName", "path": "/home/kavia/workspace/code-generation/thai-accountant-assistant-226192-226202/accountant_backend/src/services/classificationService.js", "pattern": "/^async function resolveCategoryIdByThaiName({ parentId, nameTh }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ parentId, nameTh })"}], "hash": "61e5e081dffe98eff14b95497a73712f", "format-version": 4, "code-base-name": "accountant_backend", "filename": "accountant_backend/src/services/classificationService.js", "fields": [{"name": "module.exports = new ClassificationService();", "scope": "module", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"54": "95c0f60de593face0a4bfa25093ec367bf7571b4"}]}