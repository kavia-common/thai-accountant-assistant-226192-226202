{"is_source_file": true, "format": "JavaScript", "description": "This file defines the ExtractionService class for handling transaction extraction from uploads. It includes functions to normalize text, perform demo transaction extraction, interact with the database, and manage upload statuses.", "external_files": ["../db/pool", "../errors/apiError", "./uploadsService"], "external_methods": ["require('../db/pool').query", "require('../errors/apiError').ApiError", "uploadsService.getUpload", "uploadsService.setStatus"], "published": ["new ExtractionService()"], "classes": [{"name": "ExtractionService", "description": "A service class responsible for extracting transaction data from uploaded bank statement files, including demo data generation and database interactions."}], "methods": [{"name": "normalizeText(s)", "description": "Normalizes input strings by trimming, converting to lowercase, and collapsing whitespace.", "scope": "", "scopeKind": ""}, {"name": "extractTransactions(uploadId)", "description": "Main method to extract transactions for a given upload ID, supporting demo data insertion and ensuring idempotency.", "scope": "ExtractionService", "scopeKind": "class"}], "calls": ["uploadsService.getUpload", "uploadsService.setStatus", "query"], "search-terms": ["extractionService", "normalizeText", "demo transactions", "upload status handling", "bank_statement upload", "transaction insertion"], "state": 2, "file_id": 19, "knowledge_revision": 53, "git_revision": "95c0f60de593face0a4bfa25093ec367bf7571b4", "ctags": [{"_type": "tag", "name": "ExtractionService", "path": "/home/kavia/workspace/code-generation/thai-accountant-assistant-226192-226202/accountant_backend/src/services/extractionService.js", "pattern": "/^class ExtractionService {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "exports", "path": "/home/kavia/workspace/code-generation/thai-accountant-assistant-226192-226202/accountant_backend/src/services/extractionService.js", "pattern": "/^module.exports = new ExtractionService();$/", "language": "JavaScript", "kind": "variable", "scope": "module", "scopeKind": "class"}, {"_type": "tag", "name": "extractTransactions", "path": "/home/kavia/workspace/code-generation/thai-accountant-assistant-226192-226202/accountant_backend/src/services/extractionService.js", "pattern": "/^  async extractTransactions(uploadId) {$/", "language": "JavaScript", "kind": "method", "signature": "(uploadId)", "scope": "ExtractionService", "scopeKind": "class"}, {"_type": "tag", "name": "normalizeText", "path": "/home/kavia/workspace/code-generation/thai-accountant-assistant-226192-226202/accountant_backend/src/services/extractionService.js", "pattern": "/^function normalizeText(s) {$/", "language": "JavaScript", "kind": "function", "signature": "(s)"}, {"_type": "tag", "name": "uploadsService", "path": "/home/kavia/workspace/code-generation/thai-accountant-assistant-226192-226202/accountant_backend/src/services/extractionService.js", "pattern": "/^const uploadsService = require('.\\/uploadsService');$/", "language": "JavaScript", "kind": "constant"}], "hash": "f7dcefe979af3e57333e156a97e0a25f", "format-version": 4, "code-base-name": "accountant_backend", "filename": "accountant_backend/src/services/extractionService.js", "fields": [{"name": "module.exports = new ExtractionService();", "scope": "module", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"53": "95c0f60de593face0a4bfa25093ec367bf7571b4"}]}